<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>
    var updatePostStats = {
        Like: function (postId) {

            document.getElementById('likes-count-' + postId).textContent++;

        },
        Dislike: function (postId) {
            document.getElementById('dislikes-count-' + postId).textContent++;
        }
    };

    var toggleButtonText = {
        Like: function (button) {
            button.textContent = "Liked";
            button.disabled = true;
        },
        Dislike: function (button) {
            button.textContent = "Disliked";
            button.disabled = true;
        }
    };

    var actOnPost = function (event) {
        var postId = event.target.id;
        console.log(postId);
        var action = event.target.textContent.trim();
        console.log(action);
        var x = document.querySelectorAll(".btn" + postId);
        x[0].disabled = true;
        x[1].disabled = true;
        toggleButtonText[action](event.target);
        updatePostStats[action](postId);
        axios.post('/protest/' + postId + '/act/' + action);
    };



    var reg = function (event) {
        var postId = event.target.id;
        document.getElementById('reg-' + postId).textContent++;
        event.target.textContent = "Registered!";
        event.target.disabled = true;
        axios.post('/protest/' + postId + '/reg/');
    };


    var mymap = L.map('mapid').setView([51.5, -0.09], 15);
    var marker = L.marker([51.5, -0.09]).addTo(mymap);
    L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoidmlqaTk4MTAiLCJhIjoiY2tqem94YjdxMDlqcjJzbWZ2NmJ0ZHdmYyJ9.D8Do1sOr5-i8TrzfhzilUQ', {
        attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
        maxZoom: 18,
        id: 'mapbox/streets-v11',
        tileSize: 512,
        zoomOffset: -1,
        accessToken: 'your.mapbox.access.token'
    }).addTo(mymap);

    var act = function (event) {
        console.log(event.target)
        console.log(event.target.dataset.lat)
        console.log(event.target.dataset.lon)
        marker.setLatLng([event.target.dataset.lat, event.target.dataset.lon])
        mymap.setView([event.target.dataset.lat, event.target.dataset.lon], 10)
    }




</script>


</body>

</html>